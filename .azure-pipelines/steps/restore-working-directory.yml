parameters:
  - name: 'artifact'
    type: 'string'
    default: 'build-windows-working-directory'

steps:
- checkout: none

- task: DownloadPipelineArtifact@2
  displayName: Download working directory
  inputs:
    artifact: ${{ parameters.artifact }}
    path: $(Agent.TempDirectory)/${{ parameters.artifact }}.tar.gz
  retryCountOnTaskFailure: 5

- task: ExtractFiles@1
  displayName: Unpack working directory
  inputs:
    archiveFilePatterns: $(Agent.TempDirectory)/${{ parameters.artifact }}.tar.gz
    destinationFolder: $(System.DefaultWorkingDirectory)