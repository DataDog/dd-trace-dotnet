//------------------------------------------------------------------------------
// <auto-generated />
// This file was automatically generated by the UpdateVendoredCode tool.
//------------------------------------------------------------------------------
#pragma warning disable CS0618, CS0649, CS1574, CS1580, CS1581, CS1584, CS1591, CS1573, CS8018, CS1587, SYSLIB0011, SYSLIB0023, SYSLIB0032
#if NETCOREAPP3_1_OR_GREATER
using System;
using System.IO;
using System.Linq;
using Datadog.Trace.Vendors.ELFSharp.Utilities;

namespace Datadog.Trace.Vendors.ELFSharp.MachO
{
    internal class UUID : Command
    {
        internal UUID(SimpleEndianessAwareReader reader, Stream stream) : base(reader, stream)
        {
            ID = ReadUUID();
        }

        public Guid ID { get; }

        private Guid ReadUUID()
        {
            var rawBytes = Reader.ReadBytes(16).ToArray();

            // Deal here with UUID endianess. Switch scheme is 4(r)-2(r)-2(r)-8(o)
            // where r is reverse, o is original order.
            Array.Reverse(rawBytes, 0, 4);
            Array.Reverse(rawBytes, 4, 2);
            Array.Reverse(rawBytes, 6, 2);

            var guid = new Guid(rawBytes);
            return guid;
        }
    }
}
#endif