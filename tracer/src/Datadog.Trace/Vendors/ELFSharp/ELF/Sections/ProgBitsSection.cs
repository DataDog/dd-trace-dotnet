//------------------------------------------------------------------------------
// <auto-generated />
// This file was automatically generated by the UpdateVendoredCode tool.
//------------------------------------------------------------------------------
#pragma warning disable CS0618, CS0649, CS1574, CS1580, CS1581, CS1584, CS1591, CS1573, CS8018, CS1587, SYSLIB0011, SYSLIB0023, SYSLIB0032
#if NETCOREAPP3_1_OR_GREATER
using System;
using Datadog.Trace.Vendors.ELFSharp.Utilities;

namespace Datadog.Trace.Vendors.ELFSharp.ELF.Sections
{
    internal sealed class ProgBitsSection<T> : Section<T>, IProgBitsSection where T : struct
    {
        private const int BufferSize = 10 * 1024;

        internal ProgBitsSection(SectionHeader header, SimpleEndianessAwareReader reader) : base(header, reader)
        {
        }


        public void WriteContents(byte[] destination, int offset, int length = 0)
        {
            SeekToSectionBeginning();
            if (length == 0 || (ulong)length > Header.Size) length = Convert.ToInt32(Header.Size);
            var remaining = length;
            while (remaining > 0)
            {
                var buffer = Reader.ReadBytes(Math.Min(BufferSize, remaining));
                buffer.CopyTo(destination, offset + (length - remaining));
                remaining -= buffer.Length;
            }
        }
    }
}
#endif