//------------------------------------------------------------------------------
// <auto-generated />
// This file was automatically generated by the UpdateVendoredCode tool.
//------------------------------------------------------------------------------
#pragma warning disable CS0618, CS0649, CS1574, CS1580, CS1581, CS1584, CS1591, CS1573, CS8018, SYSLIB0011, SYSLIB0023, SYSLIB0032

using System;
using Datadog.Trace.Vendors.Microsoft.OpenApi.Models;
using Datadog.Trace.Vendors.Microsoft.OpenApi.Services;

namespace Datadog.Trace.Vendors.Microsoft.OpenApi.Writers
{
    /// <summary>
    /// Indicates if and when the writer should convert references into complete object renderings
    /// </summary>
    [Obsolete("Use InlineLocalReference and InlineExternalReference settings instead")]
    internal enum ReferenceInlineSetting
    {
        /// <summary>
        /// Render all references as $ref.
        /// </summary>
        DoNotInlineReferences,
        /// <summary>
        /// Render all local references as inline objects
        /// </summary>
        InlineLocalReferences,
        /// <summary>
        /// Render all references as inline objects.
        /// </summary>
        InlineAllReferences
    }

    /// <summary>
    /// Configuration settings to control how OpenAPI documents are written
    /// </summary>
    internal class OpenApiWriterSettings
    {
        [Obsolete("Use InlineLocalReference and InlineExternalReference settings instead")]
        private ReferenceInlineSetting referenceInline = ReferenceInlineSetting.DoNotInlineReferences;

        internal LoopDetector LoopDetector { get; } = new();
        /// <summary>
        /// Indicates how references in the source document should be handled.
        /// </summary>
        [Obsolete("Use InlineLocalReference and InlineExternalReference settings instead")]
        public ReferenceInlineSetting ReferenceInline {
            get { return referenceInline; }
            set {
                referenceInline = value;
                switch(referenceInline)
                {
                    case ReferenceInlineSetting.DoNotInlineReferences:
                        InlineLocalReferences = false;
                        InlineExternalReferences = false;
                        break;
                    case ReferenceInlineSetting.InlineLocalReferences:
                        InlineLocalReferences = true;
                        InlineExternalReferences = false;
                        break;
                    case ReferenceInlineSetting.InlineAllReferences:
                        InlineLocalReferences = true;
                        InlineExternalReferences = true;
                        break;
                }
            }
        }
        /// <summary>
        /// Indicates if local references should be rendered as an inline object
        /// </summary>
        public bool InlineLocalReferences { get; set; }

        /// <summary>
        /// Indicates if external references should be rendered as an inline object
        /// </summary>
        public bool InlineExternalReferences { get; set; }

        internal bool ShouldInlineReference(OpenApiReference reference)
        {
            return (reference.IsLocal && InlineLocalReferences)
                             || (reference.IsExternal && InlineExternalReferences);
        }
    }
}
